# checker

Проверяет скорость загрузки сайта https://cloud.ru/ и пишет метрики в формате prometheus


Программа запускает HTTP-сервер на порту 8080 и каждые 30 секунд проверяется скорость загрузки сайта cloud.ru

Метрики доступны по адресу `/metrics` в формате Prometheus:

 - `website_load_time_seconds` - время последней проверки
 - `website_requests_total` - общее количество запросов
 - `website_failed_requests_total` - количество неудачных запросов
 - `website_tcp_handshake_seconds`  - время TCP handshake
-  `website_ttfb_seconds`  - время до первого байта (TTFB) 
-  `website_content_length_bytes`  - размер страницы
-  `website_last_status_code`  - HTTP статус код
-  `program_uptime_seconds`  - время работы программы

 **Graceful shutdown**:  
-   корректная обработка сигналов SIGINT/SIGTERM      
-   таймаут на завершение работы 5 секунд
        
**Health checks**:
Эндпоинт  `/health`  проверяет:
-   время последней проверки сайта
-   процент неудачных запросов
            
**Логирование**:
-   подробные логи с префиксом [SPEEDMON]
-   логирование всех этапов проверки
        
**Конфигурация**:
-   возможность легко изменить параметры проверки
-   таймауты запросов
        
**Безопасность**:
-   блокировки (sync.RWMutex) для безопасного доступа к метрикам
-   ограничение времени выполнения запросов
        
**Веб-интерфейс**:
-   Простая HTML страница с информацией о мониторе по адресу `http://localhost:8080/`


Для запуска выполнить `go run checker.go` и открыть `http://localhost:8080/metrics` в браузере или в Prometheus.
